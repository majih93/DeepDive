# 4장 변수

## 4.1 변수는 무엇이고 왜 필요한가

App의 핵심은 결국, 데이터를 입력**Input**받아, 처리하고, 그 결과를 출력**output**하는 것.
-> 그렇다면 그 과정에서 변수라는 개념이 무엇이고, 왜 필요한지 알아보자.

특정 연산을 수행할 때, 인간의 두뇌는 계산과 기억을 모두 두뇌에서 하는 반면에, 컴퓨터는 **연산을 하는 CPU**와 **기억을 하는 메모리**가 나뉘어져있음.

메모리는 메모리 셀의 집합체이고, 각 메모리 셀은 1바이트의 크기를 갖고 있기 때문에 컴퓨너는 1바이트 단위로 데이터를 저장하고 읽어들인다(write/read)
각 셀은 고유한 주소를 가지고 있고, 컴퓨터는 2진수로 모든 데이터를 처리하기 때문에 메모리에 저장되는 데이터 또한 2진수 저장됨.

이 때, 예를 들어 1 + 2라는 연산을 수행한다고 하면 이 연산결과 또한 메모리에 저장된다. 문제는 여기서, 1+2 라는 연산을 통해 메모리에 저장된 3이라는 값을 다시 사용하기 위해 해당 데이터가 담겨있는 메모리 공간의 주소를 통해 직접 접근하는 방법을 사용하는 경우 치명적인 오류가 생길 가능성이 있다.(ex. 운영체제가 사용중인 값을 변경하게 되면 시스템이 멈출 수도 있는 등)

또한, 특정 값을 활용해서 코드를 짰더라도 해당 값이 저장될 메모리 주소는 코드가 실행될 때 임의로 결정되므로 코드가 실행되기 전에는 메모리 주소를 알 수가 없다. 위와 같은 이유로 자바스크립트는 사용자가 메모리 주소를 통해 값에 직접 접근하는 것을 허락하지 않는다.

그렇다면 어떻게 우리가 연산을 통해서 얻은 값을 재사용할 수 있을까?
-> 프로그래밍 언어는 원하는 값을 메모리에 저장하고, 다시 읽어서 사용하기 위해 **변수**라는 메커니즘을 제공하는 것

즉, **변수란 하나의 값을 저장하기 위해 확보한 메모리 공간 자체 OR 그 메모리 공간을 식별하기 위해 붙인 이름** (평소에는 후자의 의미에 더 가깝게 느껴짐.)

_변수는 일종의 메커니즘이다... 여기서 생각이 어디로 이어져야하는지, 실제로 자바스크립트에서 변수를 활용할 때 어떤 점을 고려해야되는지 같이 생각해보자._

변수 -> 컴파일러/인터프리터에 의해 해당 값이 저장된 메모리 공간 주소로 치환 -> 실행

변수를 통해서 값에 안전하게 접근 할 수 있는 것.

**변수는 개발자의 의도가 반영되도록 명확하게 네이밍 하는 것이 좋다.**

## 4.2 식별자

식별자란, **어떤 값을 구별해서 식별할 수 있는 고유한 이름**

변수의 이름 또한 식별자로, 코드 상으로 보면 변수 이름이 값을 기억하고 있는 것 같아 보이지만 실제로는 **해당 값이 들어 있는 메모리 주소를 기억하고 있는 것** (값이 변경되어도 공간은 같은..건가..?)

식별자는 이런 변수 이름을 포함해, 함수, 클래스 등 이름을 다 포함하는 개념이다.(JS에서 함수 이름으로는 해당 함수가 저장되어 있는 공간을 식별할 수 있는 것.)

식별자는 정해진 네이밍 규칙을 지켜야하며, **선언**을 통해 자바스크립트 엔진에 '이건 식별자야'라고 알려주는 것.

## 4.3 변수 선언

변수 선언이란?
-> 값을 저장하기 위한 메모리 공간을 확보하고, 변수 이름과 해당 공간을 연결해서 값이 저장될 수 있는 상태를 만드는 것.
-> 변수 선언을 통해 확보된 메모리 공간은 확보가 해제되기 전까지는 다른 접근이 불가하도록 보호되기 때문에 안전한 사용이 가능함

변수를 사용하려면, 선언하는 것이 필수.( else, ReferenceError: '변수명' is not defined)

자바스크립트는 var, let, const 라는 3가지의 키워드를 통해 변수를 선언(키워드 ≒ code snippet)

변수를 선언하면, 자바스크립트 엔진은 해당되는 메모리 공간에 undefined 라는 값을 할당하는 방식으로 해당 공간을 초기화 한다.
(초기화 단계를 거치지 않으면 해당 공간에는 이전의 작업으로 인한 값(쓰레기 값)이 남아 있을 수 있음. 자바스크립트는 undefined를 할당하는 초기화 단게를 통해 쓰레기 값이 남아 있어 영향을 주는 위험으로부터 안전함)

## 4.4 변수 선언의 실행 시점과 변수 호이스팅

변수가 선언되기 전에 해당 변수를 활용한 코드가 실행되면, ReferenceError가 뜰까?
-> NO

Why? 변수 호이스팅이라는 자바스크립트 고유의 특징

자바스크립트는, 변수를 포함해 var, let, const, function, class 키워드를 통해 선언된 모든 식별자를 런타임이 실행되기 전 단계(소스코드를 평가하는 단계)에서 먼저 실행된다. 즉 변수 선언은 소스코드 내 위치에 관계 없이 다른 코드보다 먼저 실행 됨(이렇게 변수 선언문이 코드의 가장 위로 끌어 올려진 것처럼 동작하는 특징이 변수 호이스팅이다.)

**런타임?**

해당 소스코드가 실행되는 CASE 로 우선 이해함.

## 4.5 값의 할당

```js
var a = 10;
```

이라는 코드와,

```js
var a;
a = 10;
```

이라는 코드는 동일하게 동작한다. 즉 한번에 선언과 할당을 해도, 두 개의 문으로 나눠서 실행된다는 것.

주의할점
-> 변수가 선언되는 시점(런타임 이전)과, 값이 할당되는 시점(런타임에 소스코드가 순차적으로 실행되면서 실행)이 다르다는 점.

이 때, 일어나는 일은...

런타임 이전에 a라는 변수 선언식이 평가되어 특정 메모리 주소에 undefined라는 값으로 초기화
런타임 실행 후에 a라는 변수에 80이라는 값을 선언하게 되면 이전의 undefined 에서 새롭게 할당된 값 10으로 변경됨
이 때 undefined가 있던 메모리 공간에서 undefined 를 지우고 10으로 대체하는 것이 아니라, 10은 새롭게 확보된 메모리 공간에 위치함

a의 값이 20으로 재할당된다면, 마찬가지로 10이 있던 공간은 그대로 두고, 20을 새로운 공간에 담아 해당 공간과 변수명이 매핑되는 형식으로 작동한다.

그러면 남아 있는 undefined 와 10 이라는 메모리가 담긴 공간은 필요없는데 어떻게 될까?
-> 10, undefined 와 같은 garbage는 garbage collector에 의해 메모리에서 자동 해제됨. JS 는 가비지 콜렉터가 내장된 매니지드 언어로, 이를 통해 메모리 누수를 방지한다.

_매니지드 언어, 메모리 누수_
