# 실행 컨텍스트

## 23.1 소스코드의 타입

ECMAScript 사양은 소스코드를 4가지 타입으로 구분
-> 이 4가지 타입의 소스 코드는 실행 컨텍스트를 생성

소스코드의 타입에 따라서 실행 컨텍스트를 생성하는 과정과, 관리 내용이 다르다

이것을 공부하기에 앞서, 간단히 자바스크립트 엔진이 코드를 실행하는 방식에 대한 이해가 필요하다. JS엔진은 소스코드를 2개의 과정을 통해서 처리한다.

소스코드의 평가 -> 소스코드의 실행

**소스코드의 평가** 단계에서는 실행컨텍스트 생성 / 변수, 함수 등의 선언문만 먼저 실행하여 생성된 변수나 함수 식별자를 키로 실행 컨텍스트가 관리하는 스코프에 등록

**소스코드의 실행** 단계에서는 선언문을 제외한 소스코드가 순차적으로 실행(=== 런타임이 시작)

#### 1) 전역 코드

전역에 존재하는 소스코드. 전역에 정의된 함수/클래스 등의 내부 코드는 포함되지 않음

전역 코드는 전역 변수를 관리하기 위해 전역 스코프(-> 최상위 스코프)를 생성해야함. 그리고 전역 변수와(var로 선언된) 전역 함수를 전역 객체의 프로퍼티와 메서드로 바인딩하고 참조하기 위해서 전역 객체와 연결되어야 함

이를 위해서 전역 코드가 평가되면, 전역 실행 컨텍스트가 생성됨.

#### 2) 함수 코드

함수 내부에 존재하는 소스코드. 함수 내부에 중첩된 함수, 클래스 등의 내부 코드는 포함되지 않는다.()

_'내부는 포함되지 않는다'는 의미를 이해할 듯하다._

```javascript
function greetings() {
  function goodMorning() {
    alert("Good Morning!");
  }
}
```

여기서 함수 greetings 가 전역에서 선언된 함수라고 하면, 전역 코드의 일부인 greeting함수 선언문은 전역 코드를 평가하여 전역 실행 컨텍스트 포함되지만, 함수 goodMorning은 전역 실행 컨텍스트에 포함되지 않고, greetings 함수 실행 컨텍스트 내에서 처리됨...이라는 의미 아닐까?

무튼, 함수 코드는 지역 스코프 생성/지역 변수, 매개변수, arguments 객체를 관리해야함. 그리고 생성한 지역 스코프를 전역 스코프에서 시작하는 스코프 체인의 일원으로 연결해야함

> arguments 객체는 함수에 전달된 인수에 해당되는 Array 형태의 객체입니다.
> 스코프 체인이란?

3. eval 코드
4. 모듈 코드

---

## 추가적으로 공부해야하는 부분

- arguments 객체
- 자바스크립트 엔진/ 동작 방식
